import { useCallback, useEffect, useState } from 'react';
import MovieList from './components/MovieList';
import FilterMovies from './components/Filter';
import { fetchMovies } from './fetch/fakeServer';
function App() {
  const [movieData, setMovieData] = useState([]);
  const [favorites, setFavorites] = useState([]);
  const [likes, setLikes] = useState({});
  const [dislikes, setDislikes] = useState({});
  const [selectedGenres, setSelectedGenres] = useState('');

  useEffect(() => {
    fetchMovies().then((data) => {
      setMovieData(data);
    });
  }, []);

  const toggleFavorite = useCallback((movie) => {
    setFavorites((prevFavorites) => {
      if (prevFavorites.includes(movie)) {
        return prevFavorites.filter((id) => id !== movie.id);
      } else {
        return [...prevFavorites, movie];
      }
    });
  }, []);

  // console.log(favorites);
  const handleLikes = (movie) => {
    setLikes((prevLikes) => {
      if (prevLikes[movie.id]) return prevLikes;

      return {
        ...prevLikes,
        [movie.id]: 1,
      };
    });
  };

  const handleDislikes = (movie) => {
    setDislikes((prevDislikes) => {
      if (prevDislikes[movie.id]) return prevDislikes;
      return {
        ...prevDislikes,
        [movie.id]: 1,
      };
    });
  };

  const handleSelectGenres = (e) => {
    setSelectedGenres(e.target.value);
  };

  return (
    <div className="app-container">
      <h1 className="app-title">–ö–∏–Ω–æ–∞—Ñ–∏—à–∞</h1>
      <FilterMovies
        selectedGenres={selectedGenres}
        toggleSelectGenres={handleSelectGenres}
      />
      <MovieList
        movie={movieData}
        id={movieData.id}
        toggleFavorite={toggleFavorite}
        favorites={favorites}
        toggleLikes={handleLikes}
        likes={likes}
        dislikes={dislikes}
        toggleDislikes={handleDislikes}
        selectedGenres={selectedGenres}
        toggleSelectGenres={handleSelectGenres}
      />
    </div>
  );
}
{
  //   ### üî• **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ –ª–∞–π–∫–∞ –∏ –¥–∏–∑–ª–∞–π–∫–∞ –≤ MovieItem**
  // üìå **–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**
  // 1Ô∏è‚É£ **–î–æ–±–∞–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ª–∞–π–∫–æ–≤** ‚Üí –°–æ–∑–¥–∞–π `likes` –≤ `App.jsx`, —á—Ç–æ–±—ã —Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∞–π–∫–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∏–ª—å–º–∞.
  // 2Ô∏è‚É£ **–°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `toggleLike`** ‚Üí –ü—Ä–∏ –∫–ª–∏–∫–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∏–ª–∏ —É–º–µ–Ω—å—à–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∞–π–∫–æ–≤ —Ñ–∏–ª—å–º–∞.
  // 3Ô∏è‚É£ **–ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å `toggleLike` –≤ `MovieItem`** ‚Üí –ö–Ω–æ–ø–∫–∞ –ª–∞–π–∫–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ `MovieItem`.
  // 4Ô∏è‚É£ **–û–±–Ω–æ–≤–∏—Ç—å —Ä–∞–∑–º–µ—Ç–∫—É `MovieItem.jsx`** ‚Üí –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É ¬´üëç –õ–∞–π–∫¬ª –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ª–∞–π–∫–æ–≤.
  // 5Ô∏è‚É£ **–°—Ç–∏–ª–∏–∑–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É –ª–∞–π–∫–∞ –∏ –¥–∏–∑–ª–∞–π–∫–∞** ‚Üí –°–¥–µ–ª–∞—Ç—å –∫—Ä–∞—Å–∏–≤—ã–µ –∫–Ω–æ–ø–∫–∏.
  // ---
  // ### üìù **–ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
  // ‚úÖ **–®–∞–≥ 1. –í `App.jsx`**
  // - –°–æ–∑–¥–∞–π `likes` –≤ `useState`, –≥–¥–µ –∫–ª—é—á ‚Äî `id` —Ñ–∏–ª—å–º–∞, –∞ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∞–π–∫–æ–≤.
  // - –ù–∞–ø–∏—à–∏ —Ñ—É–Ω–∫—Ü–∏—é `toggleLike`, –∫–æ—Ç–æ—Ä–∞—è –∏–∑–º–µ–Ω—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∞–π–∫–æ–≤ —É —Ñ–∏–ª—å–º–∞.
  // - –ü–µ—Ä–µ–¥–∞–π `toggleLike` –∏ `likes` –≤ `MovieList`.
  // ‚úÖ **–®–∞–≥ 2. –í `MovieList.jsx`**
  // - –ü–µ—Ä–µ–¥–∞–π `toggleLike` –¥–∞–ª—å—à–µ –≤ `MovieItem`.
  // ‚úÖ **–®–∞–≥ 3. –í `MovieItem.jsx`**
  // - –î–æ–±–∞–≤—å –∫–Ω–æ–ø–∫—É ¬´üëç –õ–∞–π–∫¬ª –∏ ¬´üëé –î–∏–∑–ª–∞–π–∫¬ª.
  // - –ü–æ–∫–∞–∑—ã–≤–∞–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∞–π–∫–æ–≤ —Ä—è–¥–æ–º —Å –∫–Ω–æ–ø–∫–æ–π.
  // - –ü—Ä–∏ –∫–ª–∏–∫–µ –≤—ã–∑—ã–≤–∞–π `toggleLike` –∏–∑ `props`.
  // ‚úÖ **–®–∞–≥ 4. –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è**
  // - –°–¥–µ–ª–∞–π –∫–Ω–æ–ø–∫–∏ `like-btn` –∏ `dislike-btn` —Å –∫—Ä–∞—Å–∏–≤—ã–º –¥–∏–∑–∞–π–Ω–æ–º.
  // - –î–æ–±–∞–≤—å —ç—Ñ—Ñ–µ–∫—Ç `hover` –∏ `active`.
  // ---
  // ### üîó **–ö–∞–∫ –≤—Å–µ —Å–≤—è–∑–∞—Ç—å?**
  // üìå `App` ‚Üí –ø–µ—Ä–µ–¥–∞–µ—Ç `toggleLike` –≤ `MovieList`.
  // üìå `MovieList` ‚Üí –ø–µ—Ä–µ–¥–∞–µ—Ç `toggleLike` –≤ `MovieItem`.
  // üìå `MovieItem` ‚Üí –∫–Ω–æ–ø–∫–∏ –≤—ã–∑—ã–≤–∞—é—Ç `toggleLike` –ø—Ä–∏ –∫–ª–∏–∫–µ.
  // ---
  // üõ† **–¢–µ–ø–µ—Ä—å —Ç—ã –ø–∏—à–µ—à—å –∫–æ–¥, –∞ —è –ø—Ä–æ–≤–µ—Ä—é –∏ –ø–æ–º–æ–≥—É, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫!** üöÄ
}
{
  // let movieData = [];
  // fetchMovies().then((data) => {
  //   console.log(data); // –î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω—ã
  //   movieData = data; // –û–±–Ω–æ–≤–ª—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
  // });
}
{
  //   MovieList ‚Äì —Å–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤, –ø–µ—Ä–µ–¥–∞—ë—Ç –¥–∞–Ω–Ω—ã–µ –æ —Ñ–∏–ª—å–º–∞—Ö –≤ MovieItem —á–µ—Ä–µ–∑ props.
  // MovieItem ‚Äì –∫–∞—Ä—Ç–æ—á–∫–∞ –æ–¥–Ω–æ–≥–æ —Ñ–∏–ª—å–º–∞ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ä–µ–π—Ç–∏–Ω–≥).
  // MovieGenre ‚Äì –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∂–∞–Ω—Ä–∞ —Ñ–∏–ª—å–º–∞.
  // MovieRating ‚Äì –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –æ—Ç–æ–±—Ä–∞–∂–∞—é—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥.
}

{
  //     1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç App.jsx
  //     –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç MovieList –≤ App.jsx.
  //     –ü–æ–¥–≥–æ—Ç–æ–≤—å useState (–∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –µ—Å–ª–∏ –±–µ–∑ —Ö—É–∫–æ–≤), —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ MovieList.
  //     –ü–µ—Ä–µ–¥–∞–π –º–∞—Å—Å–∏–≤ —Ñ–∏–ª—å–º–æ–≤ —á–µ—Ä–µ–∑ props –≤ MovieList.
  // 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç MovieList.jsx
  //     –ü—Ä–∏–º–∏ –º–∞—Å—Å–∏–≤ —Ñ–∏–ª—å–º–æ–≤ —á–µ—Ä–µ–∑ props.
  //     –ò—Å–ø–æ–ª—å–∑—É–π map() –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∞ —Å–ø–∏—Å–∫–∞ —Ñ–∏–ª—å–º–æ–≤.
  //     –ö–∞–∂–¥—ã–π —Ñ–∏–ª—å–º —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç MovieCard.
  //     –ü–µ—Ä–µ–¥–∞–≤–∞–π –≤ MovieCard –¥–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å–º–∞ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, –∂–∞–Ω—Ä, —Ä–µ–π—Ç–∏–Ω–≥).
  //     –î–æ–±–∞–≤—å key, —á—Ç–æ–±—ã React –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏–ª —Å–ø–∏—Å–æ–∫.
  // 3. –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç MovieCard.jsx
  //     –ü—Ä–∏–Ω–∏–º–∞–π –¥–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å–º–∞ —á–µ—Ä–µ–∑ props.
  //     –û—Ç–æ–±—Ä–∞–∂–∞–π –∏—Ö –≤–Ω—É—Ç—Ä–∏ JSX-—Ä–∞–∑–º–µ—Ç–∫–∏ (–≤—ë—Ä—Å—Ç–∫–∞ —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å).
  //     –ò—Å–ø–æ–ª—å–∑—É–π –∫–ª–∞—Å—Å—ã ( className) –∏–∑ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏.
  // 4. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–ª–∏–∫–∞ (—Å–æ–±—ã—Ç–∏—è)
  //     –í MovieCard.jsx –¥–æ–±–∞–≤—å –∫–Ω–æ–ø–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ü–æ–¥—Ä–æ–±–Ω–µ–µ").
  //     –°–¥–µ–ª–∞–π onClick, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å alert —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ñ–∏–ª—å–º–∞.
  //     –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å props –∏ —Å–æ–±—ã—Ç–∏—è–º–∏.
  // 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤—Å–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
  //     –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç –∏ —É–±–µ–¥–∏—Å—å, —á—Ç–æ —Ñ–∏–ª—å–º—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –º–∞—Å—Å–∏–≤–∞.
  //     –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –∫–ª–∏–∫–∏ –ø–æ –∫–Ω–æ–ø–∫–∞–º —Ä–∞–±–æ—Ç–∞—é—Ç.
  //     –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Å—Ç–∏–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è.
}

export default App;
